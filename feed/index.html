<?xml version="1.0" encoding="utf-8"?>
  <rss version="2.0"
        xmlns:content="http://purl.org/rss/1.0/modules/content/"
        xmlns:atom="http://www.w3.org/2005/Atom"
  >
  <channel>
    <title>唐海宸</title>
    <link href="http://localhost:4444/feed/" rel="self" />
    <link href="http://webfrogs.github.com" />
    <lastBuildDate>2017-04-19T23:02:42+08:00</lastBuildDate>
    <webMaster>ccf.developer@gmail.com</webMaster>
    
    <item>
      <title>html中canvas初解</title>
      <link href="http://localhost:4444/html/2017/04/15/html-canvas.html"/>
      <pubDate>2017-04-15T18:28:53+08:00</pubDate>
      <author>唐海宸</author>
      <guid>http://localhost:4444/html/2017/04/15/html-canvas</guid>
      <content:encoded><![CDATA[<h2 class="littleTitle">canvas</h2>
<p>canvas可以实现很多效果。但其所有的实现都要通过js实现，其标签本身就是一块300*150的白色画布。我们</p>
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="lineno">1 </span>   <span class="p">&lt;</span><span class="nt">canvas</span> <span class="na">width</span><span class="o">=</span><span class="s">&quot;600&quot;</span> <span class="na">height</span><span class="o">=</span><span class="s">&quot;600&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">canvas</span><span class="p">&gt;</span></code></pre></figure>
<p>下面是用canvas作的三角形</p>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="lineno"> 1 </span>    <span class="kd">var</span> <span class="nx">canvas</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
<span class="lineno"> 2 </span>    <span class="kd">var</span> <span class="nx">ctx</span><span class="o">=</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span>
<span class="lineno"> 3 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
<span class="lineno"> 4 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span><span class="mi">200</span><span class="p">);</span>
<span class="lineno"> 5 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">270</span><span class="p">,</span><span class="mi">220</span><span class="p">);</span>
<span class="lineno"> 6 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">350</span><span class="p">,</span><span class="mi">230</span><span class="p">);</span>
<span class="lineno"> 7 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeStyle</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">;</span>
<span class="lineno"> 8 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span>
<span class="lineno"> 9 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineWidth</span><span class="o">=</span><span class="mi">5</span><span class="p">;</span>
<span class="lineno">10 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>
<span class="lineno">11 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
<span class="lineno">12 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span></code></pre></figure>
<p>画矩形</p>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="lineno">1 </span><span class="kd">var</span> <span class="nx">canvas</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
<span class="lineno">2 </span>    <span class="kd">var</span> <span class="nx">ctx</span><span class="o">=</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span>
<span class="lineno">3 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeStyle</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">;</span>
<span class="lineno">4 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeRect</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">50</span><span class="p">)</span>
<span class="lineno">5 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">;</span>
<span class="lineno">6 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">50</span><span class="p">);</span>
<span class="lineno">7 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">)</span></code></pre></figure>
<p>canvas画饼状图</p>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="lineno"> 1 </span><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">[{</span>
<span class="lineno"> 2 </span>    <span class="s1">&#39;value&#39;</span><span class="o">:</span> <span class="p">.</span><span class="mi">2</span><span class="p">,</span>
<span class="lineno"> 3 </span>    <span class="s1">&#39;color&#39;</span><span class="o">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span>
<span class="lineno"> 4 </span>    <span class="s1">&#39;title&#39;</span><span class="o">:</span> <span class="s1">&#39;PHP就业情况&#39;</span>
<span class="lineno"> 5 </span><span class="p">},</span> <span class="p">{</span>
<span class="lineno"> 6 </span>    <span class="s1">&#39;value&#39;</span><span class="o">:</span> <span class="p">.</span><span class="mi">4</span><span class="p">,</span>
<span class="lineno"> 7 </span>    <span class="s1">&#39;color&#39;</span><span class="o">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>
<span class="lineno"> 8 </span>    <span class="s1">&#39;title&#39;</span><span class="o">:</span> <span class="s1">&#39;web前端就业情况&#39;</span>
<span class="lineno"> 9 </span><span class="p">},</span> <span class="p">{</span>
<span class="lineno">10 </span>    <span class="s1">&#39;value&#39;</span><span class="o">:</span> <span class="p">.</span><span class="mi">3</span><span class="p">,</span>
<span class="lineno">11 </span>    <span class="s1">&#39;color&#39;</span><span class="o">:</span> <span class="s1">&#39;gray&#39;</span><span class="p">,</span>
<span class="lineno">12 </span>    <span class="s1">&#39;title&#39;</span><span class="o">:</span> <span class="s1">&#39;Java就业情况&#39;</span>
<span class="lineno">13 </span><span class="p">},</span> <span class="p">{</span>
<span class="lineno">14 </span>    <span class="s1">&#39;value&#39;</span><span class="o">:</span> <span class="p">.</span><span class="mi">1</span><span class="p">,</span>
<span class="lineno">15 </span>    <span class="s1">&#39;color&#39;</span><span class="o">:</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span>
<span class="lineno">16 </span>    <span class="s1">&#39;title&#39;</span><span class="o">:</span> <span class="s1">&#39;C#就业情况&#39;</span>
<span class="lineno">17 </span><span class="p">}];</span></code></pre></figure>
<p>以上为数据，下面开始用canvas作饼状图</p>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="lineno"> 1 </span><span class="kd">var</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
<span class="lineno"> 2 </span>    <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">),</span>
<span class="lineno"> 3 </span>    <span class="nx">p</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="c1">//π</span>
<span class="lineno"> 4 </span>    <span class="nx">xo</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span> <span class="c1">//圆心x坐标</span>
<span class="lineno"> 5 </span>    <span class="nx">yo</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span> <span class="c1">//圆心y坐标</span>
<span class="lineno"> 6 </span>    <span class="nx">r</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span> <span class="c1">//半径</span>
<span class="lineno"> 7 </span>    <span class="nx">d</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span> <span class="c1">//文字距离圆的距离</span>
<span class="lineno"> 8 </span>    <span class="nx">staRank</span> <span class="o">=</span> <span class="o">-</span><span class="mi">90</span> <span class="o">/</span> <span class="mi">180</span> <span class="o">*</span> <span class="nx">p</span><span class="p">;</span> <span class="c1">//数据开始的弧度</span>
<span class="lineno"> 9 </span><span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">10 </span>    <span class="kd">var</span> <span class="nx">ang</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">value</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">p</span><span class="p">,</span> <span class="c1">//每一部分所占的弧度;</span>
<span class="lineno">11 </span>        <span class="nx">endRank</span> <span class="o">=</span> <span class="nx">staRank</span> <span class="o">+</span> <span class="nx">ang</span><span class="p">,</span> <span class="c1">//数据结束的弧度</span>
<span class="lineno">12 </span>        <span class="nx">text</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">title</span><span class="p">,</span> <span class="c1">//获得文本</span>
<span class="lineno">13 </span>        <span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">staRank</span> <span class="o">+</span> <span class="nx">ang</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">r</span> <span class="o">+</span> <span class="nx">d</span><span class="p">),</span><span class="c1">//设置文字出现的x坐标</span>
<span class="lineno">14 </span>        <span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">staRank</span> <span class="o">+</span> <span class="nx">ang</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">r</span> <span class="o">+</span> <span class="nx">d</span><span class="p">);</span><span class="c1">//设置文字出现的y坐标</span>
<span class="lineno">15 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span> <span class="c1">//开始绘制</span>
<span class="lineno">16 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">xo</span><span class="p">,</span> <span class="nx">yo</span><span class="p">);</span> <span class="c1">//绘制圆心</span>
<span class="lineno">17 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">xo</span><span class="p">,</span> <span class="nx">yo</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="nx">staRank</span><span class="p">,</span> <span class="nx">endRank</span><span class="p">,</span><span class="kc">false</span><span class="p">);</span> <span class="c1">//画圆,以开始和结束的弧度来计算</span>
<span class="lineno">18 </span>    <span class="nx">staRank</span> <span class="o">=</span> <span class="nx">endRank</span><span class="p">;</span> <span class="c1">//开始的弧度会随着不同的数据发生变化</span>
<span class="lineno">19 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">color</span><span class="p">;</span> <span class="c1">//填充颜色</span>
<span class="lineno">20 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">font</span> <span class="o">=</span> <span class="s1">&#39;16px &quot;微软雅黑&quot;&#39;</span><span class="p">;</span>
<span class="lineno">21 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">textAlign</span> <span class="o">=</span> <span class="s1">&#39;center&#39;</span><span class="p">;</span>
<span class="lineno">22 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillText</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">xo</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">yo</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span><span class="c1">//填充文字(content,x,y)</span>
<span class="lineno">23 </span>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span> <span class="c1">//填充</span>
<span class="lineno">24 </span><span class="p">}</span></code></pre></figure>


]]></content:encoded>
    </item>
    
    <item>
      <title>angular深入了解</title>
      <link href="http://localhost:4444/angular/2017/04/06/angular-simple-first.html"/>
      <pubDate>2017-04-06T14:28:53+08:00</pubDate>
      <author>唐海宸</author>
      <guid>http://localhost:4444/angular/2017/04/06/angular-simple-first</guid>
      <content:encoded><![CDATA[<p>我们无论是用js还是jq，要实现数据的绑定，都是要先实现监听DOM之后获取所输入的值，然后再修改DOM值。</p>
<p>在angular中，我们所修改的ng-model，就直接通过$scope作用在了price上</p>
<h4>html</h4>
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="lineno">1 </span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-app</span><span class="o">=</span><span class="s">&quot;app&quot;</span> <span class="na">ng-controller</span><span class="o">=</span><span class="s">&quot;contro&quot;</span><span class="p">&gt;</span><span class="c">&lt;!--这就是一个小模块 --&gt;</span>
<span class="lineno">2 </span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;kg&quot;</span> <span class="na">ng-model</span><span class="o">=</span><span class="s">&quot;kg&quot;</span><span class="p">&gt;</span>公斤<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="lineno">3 </span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>运费<span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>{/{price()}}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>元<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="lineno">4 </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></code></pre></figure>
<p>通常来说，我们一个页面上只有一个app，但是可以有多个controller。</p>
<h4>js</h4>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="lineno"> 1 </span><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;app&#39;</span> <span class="p">,</span> <span class="p">[]);</span><span class="c1">//获得ng-app</span>
<span class="lineno"> 2 </span><span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;contro&#39;</span> <span class="p">,</span> <span class="p">[</span><span class="s2">&quot;$scope&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span><span class="c1">//设置控制器。其中$scope为controller中所有数据的集合</span>
<span class="lineno"> 3 </span><span class="nx">$scope</span><span class="p">.</span><span class="nx">kg</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="c1">//设置$scope中的kg为1</span>
<span class="lineno"> 4 </span><span class="nx">$scope</span><span class="p">.</span><span class="nx">price</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<span class="lineno"> 5 </span><span class="k">if</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">kg</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno"> 6 </span><span class="k">return</span> <span class="mi">15</span><span class="p">;</span>
<span class="lineno"> 7 </span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="lineno"> 8 </span><span class="k">return</span> <span class="p">(</span> <span class="mi">15</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">kg</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">10</span> <span class="p">);</span>
<span class="lineno"> 9 </span><span class="p">}</span>
<span class="lineno">10 </span><span class="p">}</span>
<span class="lineno">11 </span><span class="p">}]);</span><span class="c1">//设置$scope中的price为函数</span>
<span class="lineno">12 </span><span class="c1">//其中的kg在上面的ng-model中使用。price展示在span里</span></code></pre></figure>
<p>我们会需要MVC？因为随着代码规模越来越大，切分职责是大势所趋，还有为了后期维护方便，修改一块功能不影响其他功能。还有为了复用，因为很多逻辑是一样的。而MVC只是手段，终极目标是模块化和复用。</p>
<small>其中的{/{之所以加/是因为会被解析，使用时时去除</small>
<p>----------------------------------------------</p>
<ul>
	<li>ng-app   定义模块</li>
	<li>ng-init  初始化数据</li>
	<li>ng-bind  将数据渲染到页面上，单向绑定。跟{/{}}作用一样但不会因为未渲染被用户发现</li>
	<li>ng-value  将数据渲染到value上。与bind功能类似</li>
	<li>ng-model 绑定输入框中的内容。双向绑定</li>
	<li>ng-repeat 遍历数组。</li>
</ul>
<p>以上为最基础的angular思想。各个部分分离出来。</p>
<p>当然，不仅仅可以使用其规定的指令，我们同样可以自定义指令来使用(如下)</p>
<h4>html</h4>
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="lineno">1 </span><span class="p">&lt;</span><span class="nt">p</span> <span class="na">happy</span><span class="p">&gt;</span>Attribute<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="lineno">2 </span><span class="p">&lt;</span><span class="nt">happy</span><span class="p">&gt;</span>
<span class="lineno">3 </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>Element<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="lineno">4 </span><span class="p">&lt;/</span><span class="nt">happy</span><span class="p">&gt;</span>
<span class="lineno">5 </span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;happy&quot;</span><span class="p">&gt;</span>Class<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="lineno">6 </span><span class="c">&lt;!-- M:happy --&gt;</span></code></pre></figure>
<h4>js</h4>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="lineno"> 1 </span><span class="kd">var</span> <span class="nx">myModule</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;app&#39;</span><span class="p">,[]);</span><span class="c1">//先获取模块</span>
<span class="lineno"> 2 </span><span class="nx">myModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;happy&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span><span class="c1">//获取自定义的happy元素</span>
<span class="lineno"> 3 </span><span class="k">return</span> <span class="p">{</span>
<span class="lineno"> 4 </span><span class="nx">restrict</span><span class="o">:</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="c1">// E = Element, A = Attribute, C = Class, M = Comment</span>
<span class="lineno"> 5 </span><span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;&lt;div&gt;今天很高兴 &lt;div ng-transclude&gt;&lt;/div&gt;&lt;/div&gt;&#39;</span><span class="p">,</span><span class="c1">//替换内容</span>
<span class="lineno"> 6 </span><span class="c1">// templateUrl: &#39;&#39;,//可选参数， 代表替换模板的链接</span>
<span class="lineno"> 7 </span><span class="nx">replace</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span><span class="c1">//true： 覆盖原有标签, false：作用在原有标签的内容上</span>
<span class="lineno"> 8 </span><span class="nx">transclude</span><span class="o">:</span> <span class="kc">false</span> <span class="c1">//如果为true的话可以将原有标签的内容存在ng-transclude中。如上，将其放置在template模板中</span>
<span class="lineno"> 9 </span><span class="p">};</span>
<span class="lineno">10 </span><span class="p">});</span></code></pre></figure>
<p>restrict属性不同时的效果</p>
当restrict为A时body效果
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="lineno">1 </span><span class="p">&lt;</span><span class="nt">p</span> <span class="na">happy</span><span class="p">&gt;</span>今天很高兴<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="lineno">2 </span><span class="p">&lt;</span><span class="nt">happy</span><span class="p">&gt;</span>
<span class="lineno">3 </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>Element<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="lineno">4 </span><span class="p">&lt;/</span><span class="nt">happy</span><span class="p">&gt;</span>
<span class="lineno">5 </span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;happy&quot;</span><span class="p">&gt;</span>Class<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="lineno">6 </span><span class="c">&lt;!-- M:happy --&gt;</span></code></pre></figure>
当restrict为E时body效果
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="lineno">1 </span><span class="p">&lt;</span><span class="nt">p</span> <span class="na">happy</span><span class="p">&gt;</span>Attribute<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="lineno">2 </span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>今天很高兴<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="lineno">3 </span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;happy&quot;</span><span class="p">&gt;</span>Class<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="lineno">4 </span><span class="c">&lt;!-- M:happy --&gt;</span></code></pre></figure>
当restrict为C时body效果
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="lineno">1 </span><span class="p">&lt;</span><span class="nt">p</span> <span class="na">happy</span><span class="p">&gt;</span>Attribute<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="lineno">2 </span><span class="p">&lt;</span><span class="nt">happy</span><span class="p">&gt;</span>
<span class="lineno">3 </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>Element<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="lineno">4 </span><span class="p">&lt;/</span><span class="nt">happy</span><span class="p">&gt;</span>
<span class="lineno">5 </span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;happy&quot;</span><span class="p">&gt;</span>今天很高兴<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="lineno">6 </span><span class="c">&lt;!-- M:happy --&gt;</span></code></pre></figure>
当restrict为E时body效果
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="lineno">1 </span><span class="p">&lt;</span><span class="nt">p</span> <span class="na">happy</span><span class="p">&gt;</span>Attribute<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="lineno">2 </span><span class="p">&lt;</span><span class="nt">happy</span><span class="p">&gt;</span>
<span class="lineno">3 </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>Element<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="lineno">4 </span><span class="p">&lt;/</span><span class="nt">happy</span><span class="p">&gt;</span>
<span class="lineno">5 </span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;happy&quot;</span><span class="p">&gt;</span>Class<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="lineno">6 </span><span class="p">&lt;</span><span class="nt">p</span> <span class="na">happy</span><span class="p">&gt;</span>今天很高兴<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="lineno">7 </span><span class="c">&lt;!-- M:happy --&gt;</span></code></pre></figure>
<pre>
当replace属性为true时其restrict值
为A时，替换的是属性为happy的元素
为E时，替换的是标签为happy的元素，
为C时，替换的是class为happy的元素，
为M时，替换的是注释为happy的元素，
</pre>
<p>当replace为false以及transclude为true时的情况各位看官可自行尝试</p>

]]></content:encoded>
    </item>
    
    <item>
      <title>angular简介</title>
      <link href="http://localhost:4444/angular/2017/04/05/angular-summary.html"/>
      <pubDate>2017-04-05T14:28:53+08:00</pubDate>
      <author>唐海宸</author>
      <guid>http://localhost:4444/angular/2017/04/05/angular-summary</guid>
      <content:encoded><![CDATA[<p>我们无论是用js还是jq，要实现数据的绑定，都是要先实现监听DOM之后获取所输入的值，然后再修改DOM值。</p>
<p>在angular中，我们所修改的ng-model，就直接通过$scope作用在了price上</p>
<h4>html</h4>
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="lineno">1 </span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-app</span><span class="o">=</span><span class="s">&quot;app&quot;</span> <span class="na">ng-controller</span><span class="o">=</span><span class="s">&quot;contro&quot;</span><span class="p">&gt;</span><span class="c">&lt;!--这就是一个小模块 --&gt;</span>
<span class="lineno">2 </span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;kg&quot;</span> <span class="na">ng-model</span><span class="o">=</span><span class="s">&quot;kg&quot;</span><span class="p">&gt;</span>公斤<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="lineno">3 </span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>运费<span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>{/{price()}}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>元<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="lineno">4 </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></code></pre></figure>
<p>通常来说，我们一个页面上只有一个app，但是可以有多个controller。</p>
<h4>js</h4>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="lineno"> 1 </span><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;app&#39;</span> <span class="p">,</span> <span class="p">[]);</span><span class="c1">//获得ng-app</span>
<span class="lineno"> 2 </span><span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;contro&#39;</span> <span class="p">,</span> <span class="p">[</span><span class="s2">&quot;$scope&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span><span class="c1">//设置控制器。其中$scope为controller中所有数据的集合</span>
<span class="lineno"> 3 </span><span class="nx">$scope</span><span class="p">.</span><span class="nx">kg</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="c1">//设置$scope中的kg为1</span>
<span class="lineno"> 4 </span><span class="nx">$scope</span><span class="p">.</span><span class="nx">price</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<span class="lineno"> 5 </span><span class="k">if</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">kg</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno"> 6 </span><span class="k">return</span> <span class="mi">15</span><span class="p">;</span>
<span class="lineno"> 7 </span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="lineno"> 8 </span><span class="k">return</span> <span class="p">(</span> <span class="mi">15</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">kg</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">10</span> <span class="p">);</span>
<span class="lineno"> 9 </span><span class="p">}</span>
<span class="lineno">10 </span><span class="p">}</span>
<span class="lineno">11 </span><span class="p">}]);</span><span class="c1">//设置$scope中的price为函数</span>
<span class="lineno">12 </span><span class="c1">//其中的kg在上面的ng-model中使用。price展示在span里</span></code></pre></figure>
<p>我们会需要MVC？因为随着代码规模越来越大，切分职责是大势所趋，还有为了后期维护方便，修改一块功能不影响其他功能。还有为了复用，因为很多逻辑是一样的。而MVC只是手段，终极目标是模块化和复用。</p>
<p>----------------------------------------------</p>
<ul>
	<li>ng-app   定义模块</li>
	<li>ng-init  初始化数据</li>
	<li>ng-bind  将数据渲染到页面上，单向绑定。跟{/{}}作用一样但不会因为未渲染被用户发现</li>
	<li>ng-value  将数据渲染到value上。与bind功能类似</li>
	<li>ng-model 绑定输入框中的内容。双向绑定</li>
	<li>ng-repeat 遍历数组。</li>
</ul>
<p>以上为最基础的angular思想。各个部分分离出来。</p>
<p>当然，不仅仅可以使用其规定的指令，我们同样可以自定义指令来使用(如下)</p>
<h4>html</h4>
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="lineno">1 </span><span class="p">&lt;</span><span class="nt">p</span> <span class="na">happy</span><span class="p">&gt;</span>Attribute<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="lineno">2 </span><span class="p">&lt;</span><span class="nt">happy</span><span class="p">&gt;</span>
<span class="lineno">3 </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>Element<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="lineno">4 </span><span class="p">&lt;/</span><span class="nt">happy</span><span class="p">&gt;</span>
<span class="lineno">5 </span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;happy&quot;</span><span class="p">&gt;</span>Class<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="lineno">6 </span><span class="c">&lt;!-- M:happy --&gt;</span></code></pre></figure>
<h4>js</h4>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="lineno"> 1 </span><span class="kd">var</span> <span class="nx">myModule</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;app&#39;</span><span class="p">,[]);</span><span class="c1">//先获取模块</span>
<span class="lineno"> 2 </span><span class="nx">myModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;happy&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span><span class="c1">//获取自定义的happy元素</span>
<span class="lineno"> 3 </span><span class="k">return</span> <span class="p">{</span>
<span class="lineno"> 4 </span><span class="nx">restrict</span><span class="o">:</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="c1">// E = Element, A = Attribute, C = Class, M = Comment</span>
<span class="lineno"> 5 </span><span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;&lt;div&gt;今天很高兴 &lt;div ng-transclude&gt;&lt;/div&gt;&lt;/div&gt;&#39;</span><span class="p">,</span><span class="c1">//替换内容</span>
<span class="lineno"> 6 </span><span class="c1">// templateUrl: &#39;&#39;,//可选参数， 代表替换模板的链接</span>
<span class="lineno"> 7 </span><span class="nx">replace</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span><span class="c1">//true： 覆盖原有标签, false：作用在原有标签的内容上</span>
<span class="lineno"> 8 </span><span class="nx">transclude</span><span class="o">:</span> <span class="kc">false</span> <span class="c1">//如果为true的话可以将原有标签的内容存在ng-transclude中。如上，将其放置在template模板中</span>
<span class="lineno"> 9 </span><span class="p">};</span>
<span class="lineno">10 </span><span class="p">});</span></code></pre></figure>
<p>restrict属性不同时的效果</p>
当restrict为A时body效果
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="lineno">1 </span><span class="p">&lt;</span><span class="nt">p</span> <span class="na">happy</span><span class="p">&gt;</span>今天很高兴<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="lineno">2 </span><span class="p">&lt;</span><span class="nt">happy</span><span class="p">&gt;</span>
<span class="lineno">3 </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>Element<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="lineno">4 </span><span class="p">&lt;/</span><span class="nt">happy</span><span class="p">&gt;</span>
<span class="lineno">5 </span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;happy&quot;</span><span class="p">&gt;</span>Class<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="lineno">6 </span><span class="c">&lt;!-- M:happy --&gt;</span></code></pre></figure>
当restrict为E时body效果
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="lineno">1 </span><span class="p">&lt;</span><span class="nt">p</span> <span class="na">happy</span><span class="p">&gt;</span>Attribute<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="lineno">2 </span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>今天很高兴<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="lineno">3 </span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;happy&quot;</span><span class="p">&gt;</span>Class<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="lineno">4 </span><span class="c">&lt;!-- M:happy --&gt;</span></code></pre></figure>
当restrict为C时body效果
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="lineno">1 </span><span class="p">&lt;</span><span class="nt">p</span> <span class="na">happy</span><span class="p">&gt;</span>Attribute<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="lineno">2 </span><span class="p">&lt;</span><span class="nt">happy</span><span class="p">&gt;</span>
<span class="lineno">3 </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>Element<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="lineno">4 </span><span class="p">&lt;/</span><span class="nt">happy</span><span class="p">&gt;</span>
<span class="lineno">5 </span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;happy&quot;</span><span class="p">&gt;</span>今天很高兴<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="lineno">6 </span><span class="c">&lt;!-- M:happy --&gt;</span></code></pre></figure>
当restrict为E时body效果
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="lineno">1 </span><span class="p">&lt;</span><span class="nt">p</span> <span class="na">happy</span><span class="p">&gt;</span>Attribute<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="lineno">2 </span><span class="p">&lt;</span><span class="nt">happy</span><span class="p">&gt;</span>
<span class="lineno">3 </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>Element<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="lineno">4 </span><span class="p">&lt;/</span><span class="nt">happy</span><span class="p">&gt;</span>
<span class="lineno">5 </span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;happy&quot;</span><span class="p">&gt;</span>Class<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="lineno">6 </span><span class="p">&lt;</span><span class="nt">p</span> <span class="na">happy</span><span class="p">&gt;</span>今天很高兴<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="lineno">7 </span><span class="c">&lt;!-- M:happy --&gt;</span></code></pre></figure>
<pre>
当replace属性为true时其restrict值
为A时，替换的是属性为happy的元素
为E时，替换的是标签为happy的元素，
为C时，替换的是class为happy的元素，
为M时，替换的是注释为happy的元素，
</pre>
<p>当replace为false以及transclude为true时的情况各位看官可自行尝试</p>

]]></content:encoded>
    </item>
    
    <item>
      <title>NODE简易CRM编写</title>
      <link href="http://localhost:4444/node/2017/03/26/Node-summary.html"/>
      <pubDate>2017-03-26T18:28:53+08:00</pubDate>
      <author>唐海宸</author>
      <guid>http://localhost:4444/node/2017/03/26/Node-summary</guid>
      <content:encoded><![CDATA[<h2>API扫盲</h2>

 <ul>
        <li>CRM-->客户管理系统</li>
        <li>CMS-->内容发布管理系统</li>
        <li>ERP-->企业战略信息管理系统</li>
        <li>OA-->企业办公管理系统</li>//工具类的东西
    </ul>
    <h5>怎么工作的</h5>
    <ul>
        <li><b>产品/UI设计:</b><span>需求分析，产品定位，市场调查……按照产品的规划设计出对应的"效果图"(PSD->PHOTO SHOP)</span></li>
        <li><b>前端开发工程师:</b>
            <div>分析:客户端开发
                <ol>
                    <li>编写HTML+CSS等</li>
                    <li>通过AJAX向服务器端发送一个请求，把数据获取到，解析和数据绑定</li>
                    <li>把页面中用户输入的信息获取到，并通过AJAX传递给服务器。接受服务器端告诉我们的信息，从而进行后续操作。</li>
                </ol>
            </div>
        </li>
        <li><b>后端开发工程师:</b>
            <div>分析:服务器端开发
                <ol>
                    <li>在服务器上搭建一个服务(监听一个端口),把我们的项目发布出去</li>
                    <li>根据客户端的请求把所有的客户信息准备好，并且返回给客户端</li>
                    <li>把客户端传递进来的新的客户信息增加到服务器的指定位置上(正常情况下都是存储到数据库中-->assas/mongdb/mysyond/scsw/orikil/);并且告诉客户端增加成功与否</li>
                    <li></li>
                </ol>
                <div>
        </li>
    </ul>
    <p>功能分析。</p>
    <small>客户端操作不了服务器</small>
    <small>服务器操作不了客户端</small>
    <p>后端前端通过API接口文档进行联系(应用程序接口)。-->(后台给的地址就是API)</p>
    <p>先定一个规范，然后按照规范同时开工</p>
    <p>客户端和服务端的内容数据的传输一般都是通过JSON格式的字符串进行的</p>
    <ol>
        <li>获取所有的接口信息(描述)URL:"/getList" GET（什么方式请求的） 参数：客户端传递给服务端的内容。
            <p>返回(服务器端返回给客户端的内容) '{ "code":"0//返回结果的标识。0代表成功1代表失败(没有任何的客户信息)//0不是固定的。", "msg":"返回结果标识的说明信息", "data":[ {"id":'xxx,"name":"xxx","age":'xx',"adredd":'xxx'},…………/很多。 ] }'
            </p>
        </li>
        <li>获取具体某一个客户的信息。 URL:"/getInfo GET（什么方式请求的） 参数：？id=xx把需要获取的客户的ID传递给服务器
            <p>返回'{ "code":"0//返回结果的标识。0代表成功1代表失败(当前的客户信息不存在)//不是固定的。", "msg":"返回结果标识的说明信息", "data":{"id":'xxx,"name":"xxx","age":'xx',"adredd":'xxx'} }'
            </p>
        </li>
        <li>增加客户信息。 URL:"/addInfo" POST 参数：在请求主体中'{ "name":"jdjd"…… }'//id是在增加的过程中服务器按照规律生成的:在现有的最后一个客户id的基础上加一即可。
            <p>返回:'{"code":"0//返回结果的标识。0代表成功1代表失败//不是固定的。", "msg":"返回结果标识的说明信息",}'</p>
        </li>
        <li>修改客户信息。 URL:"/updateInfo" POST 参数：请求主体中'{"id":'xxx,"name":"xxx","age":'xx',"adredd":'xxx'}'
            <p>返回:'{"code":"0//返回结果的标识。0代表成功1代表失败//不是固定的。", "msg":"返回结果标识的说明信息",}'</p>
            <p></p>
        </li>
        <li>删除客户信息。 URL:"/removeInfo" GET 参数:?id=xx; 返回:'{"code":"0//
            <p>返回结果的标识。0代表成功1代表失败//不是固定的。", "msg":"返回结果标识的说明信息",}'</p>
        </li>
    </ol>
    <div>
    <h4>后台人员</h4>
    <ul>
        <li>搭建一个服务，监听一个端口</li>
        <li></li>
        <li></li>
    </ul><br>
    <h4>前端人员</h4>
    <ul>
        <li>搭建一个服务，监听一个端口</li>
        <li>API数据接口的处理</li>
        <li></li>
    </ul>
    </div>


<p>NODE简易CRM编写</p>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="lineno"> 1 </span><span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;http&#39;</span><span class="p">),</span>
<span class="lineno"> 2 </span>    <span class="nx">url</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">),</span>
<span class="lineno"> 3 </span>    <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span>
<span class="lineno"> 4 </span><span class="c1">//当客户端向服务端发送一个请求走的这个端口执行回调函数</span>
<span class="lineno"> 5 </span><span class="kd">var</span> <span class="nx">server1</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="lineno"> 6 </span>    <span class="kd">var</span> <span class="nx">urlObj</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">),</span>
<span class="lineno"> 7 </span>        <span class="nx">pathname</span> <span class="o">=</span> <span class="nx">urlObj</span><span class="p">.</span><span class="nx">pathname</span><span class="p">,</span>
<span class="lineno"> 8 </span>        <span class="nx">query</span> <span class="o">=</span> <span class="nx">urlObj</span><span class="p">.</span><span class="nx">query</span><span class="p">;</span>
<span class="lineno"> 9 </span>    <span class="c1">//静态资源文件请求的处理。</span>
<span class="lineno">10 </span>    <span class="kd">var</span> <span class="nx">reg</span> <span class="o">=</span> <span class="sr">/\.(HTML|CSS|JS|ICO)/i</span><span class="p">;</span>
<span class="lineno">11 </span>    <span class="k">if</span> <span class="p">(</span><span class="nx">reg</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">pathname</span><span class="p">))</span> <span class="p">{</span>
<span class="lineno">12 </span>        <span class="kd">var</span> <span class="nx">suffix</span> <span class="o">=</span> <span class="nx">reg</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">pathname</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toUpperCase</span><span class="p">();</span>
<span class="lineno">13 </span>        <span class="kd">var</span> <span class="nx">suffixMIME</span> <span class="o">=</span> <span class="s2">&quot;text/html&quot;</span><span class="p">;</span>
<span class="lineno">14 </span>        <span class="k">switch</span> <span class="p">(</span><span class="nx">suffix</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">15 </span>            <span class="k">case</span> <span class="s2">&quot;CSS&quot;</span><span class="o">:</span>
<span class="lineno">16 </span>                <span class="nx">suffixMIME</span> <span class="o">=</span> <span class="s2">&quot;text/css&quot;</span><span class="p">;</span>
<span class="lineno">17 </span>                <span class="k">break</span><span class="p">;</span>
<span class="lineno">18 </span>            <span class="k">case</span> <span class="s2">&quot;JS&quot;</span><span class="o">:</span>
<span class="lineno">19 </span>                <span class="nx">suffixMIME</span> <span class="o">=</span> <span class="s2">&quot;text/javascript&quot;</span><span class="p">;</span>
<span class="lineno">20 </span>                <span class="k">break</span><span class="p">;</span>
<span class="lineno">21 </span>        <span class="p">}</span>
<span class="lineno">22 </span>        <span class="k">try</span> <span class="p">{</span>
<span class="lineno">23 </span>            <span class="kd">var</span> <span class="nx">conFile</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">pathname</span><span class="p">,</span> <span class="s2">&quot;utf-8&quot;</span><span class="p">);</span>
<span class="lineno">24 </span>            <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span> <span class="s1">&#39;content-type&#39;</span><span class="o">:</span> <span class="nx">suffixMIME</span> <span class="o">+</span> <span class="s1">&#39;;charset=utf-8;&#39;</span> <span class="p">});</span>
<span class="lineno">25 </span>            <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">conFile</span><span class="p">)</span>
<span class="lineno">26 </span>        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">27 </span>            <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">404</span><span class="p">,</span> <span class="p">{</span> <span class="s1">&#39;content-type&#39;</span><span class="o">:</span> <span class="s1">&#39;text/plain;charset=utf-8;&#39;</span> <span class="p">});</span>
<span class="lineno">28 </span>            <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="s2">&quot;file is not found&quot;</span><span class="p">)</span>
<span class="lineno">29 </span>        <span class="p">}</span>
<span class="lineno">30 </span>        <span class="k">return</span><span class="p">;</span>
<span class="lineno">31 </span>    <span class="p">}</span>
<span class="lineno">32 </span>    <span class="kd">var</span> <span class="nx">con</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
<span class="lineno">33 </span>        <span class="nx">customPath</span> <span class="o">=</span> <span class="s2">&quot;./json/custorn.json&quot;</span><span class="p">,</span>
<span class="lineno">34 </span>        <span class="nx">result</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="lineno">35 </span>    <span class="c1">//1、获取所有的客户信息。</span>
<span class="lineno">36 </span>    <span class="k">if</span> <span class="p">(</span><span class="nx">pathname</span> <span class="o">===</span> <span class="s1">&#39;/getList&#39;</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">37 </span>        <span class="nx">con</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">customPath</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">);</span> <span class="c1">//获得json格式字符串.(空的话会报错)</span>
<span class="lineno">38 </span>        <span class="nx">con</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">con</span> <span class="o">=</span> <span class="s1">&#39;[]&#39;</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">//防止json里面是空的话(&#39;&#39;)会报错。</span>
<span class="lineno">39 </span>        <span class="nx">con</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">con</span><span class="p">);</span> <span class="c1">//变成json格式对象。</span>
<span class="lineno">40 </span>        <span class="c1">//开始按照API文档中的规范准备给客户端返回的数据。</span>
<span class="lineno">41 </span>        <span class="nx">result</span> <span class="o">=</span> <span class="p">{</span>
<span class="lineno">42 </span>            <span class="nx">code</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="lineno">43 </span>            <span class="nx">msg</span><span class="o">:</span> <span class="s1">&#39;没有任何的客户信息&#39;</span><span class="p">,</span>
<span class="lineno">44 </span>            <span class="nx">data</span><span class="o">:</span> <span class="kc">null</span>
<span class="lineno">45 </span>        <span class="p">};</span>
<span class="lineno">46 </span>        <span class="k">if</span> <span class="p">(</span><span class="nx">con</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">47 </span>            <span class="nx">result</span> <span class="o">=</span> <span class="p">{</span>
<span class="lineno">48 </span>                <span class="nx">code</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="lineno">49 </span>                <span class="nx">msg</span><span class="o">:</span> <span class="s1">&#39;成功&#39;</span><span class="p">,</span>
<span class="lineno">50 </span>                <span class="nx">data</span><span class="o">:</span> <span class="nx">con</span>
<span class="lineno">51 </span>            <span class="p">};</span>
<span class="lineno">52 </span>        <span class="p">}</span>
<span class="lineno">53 </span>        <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span> <span class="s1">&#39;content-type&#39;</span><span class="o">:</span> <span class="s1">&#39;application/json;charset=utf-8;&#39;</span> <span class="p">});</span>
<span class="lineno">54 </span>        <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">));</span> <span class="c1">//将对象转换为json格式的字符串。</span>
<span class="lineno">55 </span>        <span class="k">return</span><span class="p">;</span>
<span class="lineno">56 </span>    <span class="p">};</span>
<span class="lineno">57 </span>
<span class="lineno">58 </span><span class="p">});</span>
<span class="lineno">59 </span><span class="cm">/*</span>
<span class="lineno">60 </span><span class="cm">resule.code =con.length===0?1:0;</span>
<span class="lineno">61 </span><span class="cm">result.msg=con.length===0?&#39;没有任何的客户信息&#39;:&#39;成功&#39;;</span>
<span class="lineno">62 </span><span class="cm">result.data=con;</span>
<span class="lineno">63 </span><span class="cm">*/</span>
<span class="lineno">64 </span>
<span class="lineno">65 </span>
<span class="lineno">66 </span>
<span class="lineno">67 </span><span class="nx">server1</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8000</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="lineno">68 </span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;server is success,listening on 80 port!&#39;</span><span class="p">)</span>
<span class="lineno">69 </span><span class="p">});</span></code></pre></figure>
<p>在html中可以获取服务器返回的文件。</p>
<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span></span><span class="lineno"> 1 </span><span class="n">var</span> <span class="n">xhr</span><span class="o">=</span><span class="kp">new</span> <span class="no">XMLHttpRequest</span><span class="p">();</span>
<span class="lineno"> 2 </span>	<span class="n">var</span> <span class="n">inp</span><span class="o">=</span><span class="n">document</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">)</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">;</span>
<span class="lineno"> 3 </span><span class="n">document</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;button&#39;</span><span class="p">)</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="n">onclick</span><span class="o">=</span><span class="p">()</span><span class="o">=&gt;</span><span class="p">{</span>
<span class="lineno"> 4 </span><span class="n">xhr</span><span class="o">.</span><span class="n">onreadystatechange</span><span class="o">=</span><span class="p">()</span><span class="o">=&gt;</span><span class="p">{</span>
<span class="lineno"> 5 </span>	<span class="k">if</span> <span class="p">(</span><span class="n">xhr</span><span class="o">.</span><span class="n">readyState</span><span class="o">==</span><span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno"> 6 </span>		<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">responseText</span><span class="p">)</span><span class="o">//</span><span class="err">点击时候不做刷新可以跟服务器做数据交互</span>
<span class="lineno"> 7 </span>	<span class="p">}</span>
<span class="lineno"> 8 </span><span class="p">}</span>
<span class="lineno"> 9 </span><span class="n">xhr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;get&#39;</span><span class="p">,</span><span class="s1">&#39;http://127.0.0.1:8000/ajaxRequest&#39;</span><span class="p">,</span><span class="kp">true</span><span class="p">)</span>
<span class="lineno">10 </span><span class="n">xhr</span><span class="o">.</span><span class="n">send</span><span class="p">();</span>
<span class="lineno">11 </span><span class="p">}</span></code></pre></figure>
]]></content:encoded>
    </item>
    
    <item>
      <title>jekyll安装指南</title>
      <link href="http://localhost:4444/jekyll/2017/03/02/jekyll-%E5%AE%89%E8%A3%85.html"/>
      <pubDate>2017-03-02T18:28:53+08:00</pubDate>
      <author>唐海宸</author>
      <guid>http://localhost:4444/jekyll/2017/03/02/jekyll-安装</guid>
      <content:encoded><![CDATA[<div>
    <h4>什么是node</h4>
    <p>基于时间驱动的异步编程（我们在node环境下编写的js程序一般是异步程序）</p>
    <p>node不是一门单独的语言，而是一个供js代码执行的环境。安装在服务器端，我们可以在服务器端用js编写程序。也就是说js不仅仅是在客户端的语言也是服务器端的语言</p>
    <h4>node与浏览器</h4>
    <p>node用的是谷歌的v8引擎来渲染js的(运行的速度快、稳定、编写的js不需要考虑兼容)</p>
    <p>浏览器中的全局js对象是window，而node环境中的全局js对象是global。</p>
    <p>浏览器是安装在客户端的。为了保护 客户端的安全，基本上不可能提供用js对客户电脑磁盘上的文件进行操作的功能。但是node环境中提供了对应的I/O(服务器上文件的操作)操作.我们使用js可以对服务器磁盘下的文件进行增删改查</p>
    <p>dom浏览器提供的一些方法，yongjs来操作当前浏览器页面对应标签的元素</p>
    <p>bom浏览器对象模型，让我们通过js操作跟浏览器相关的信息window.nabergeter.获取当前本地浏览器的版本信息</p>
    <h4>node提供给js很多新的方法</h4>
    <p>用来的服务器上进行操作：http.creatServer fs.writeFileSync fs.readFileSync等等
    </p>
</div>
<div>
    <h4>node模块</h4> 提供了一些方法供我们在node环境中使用 node模块分为三种
    <div>内置模块//http、fs、url……
        <s>http(createServer)</s>
        <s>fs(writeFileSync、readFileSync……)</s>
    </div>
    <h4>createServer//创建一个服务</h4>
    <ul>
        <li>server.listen(80,function(){})//变量server就是我们创建出来的这个服务。listen是监听80端口.为这个服务监听一个端口..当端口号监听成功之后执行函数(一般都是server is create success,listening on 80 port!)//</li>
        <li>var server=http.createServer（function(){}）//里面并不是创建成功执行的函数。而是当客户端开始向服务端的当前服务(端口号为80的这个服务)发送一个请求，并且当前服务已经成功接受到这个请求后。执行这个回调函数。</li>
        <li>该函数有（request,response）//request存放的是所有客户端的请求信息。包含客户端通过?传参的方式传递给服务器的数据内容</li>
        <li>request.url存放的是客户端请求得文件资源的目录和名称以及传递给服务器的数据。例如:客户端请求的地址。我们服务端通过request.url获取到的是端口后的东西</li>
        <li>//response提供了服务器端向客户端返回内容和数据的方法。</li>
    </ul>
    <div>
        自定义模块(我们自己定义的模块)
        <p>创建一个js文件，这就是自定义模块。</p>
        <p>var a=require('./a.js')//导入a模块使用 在a里面要写上module.exports={fn:fn}//输出模块fn模块。
        </p>
        <ul>
            <li>当前项目下创建一个js文件就相当于一个js模块</li>
            <li>如果需要提供一些方法给其他的模块使用，则需要通过modul.exports导出。</li>
            <li>在b模块中使用需要先导入a模块。var a=require('.\a')</li>
            <li>这样就可以调取a模块中的方法了.a.fn()</li>
        </ul>
    </div>
    <div>第三方模块(别人写好的模块/插件) 在NODE中使用别人的模块需要使用npm来进行管理(www.npmjs.com); 1、安装npm install 名称 -g(全局); 2.var less=require('./less');引入安装的less模块 就可以用了. 安装成功后用require把模块导入到js中。这样我们就可以使用模块中使用的方法了。
    </div>
</div>
<div>
    <h4>在服务创建成功后，如何向服务器端发送请求</h4>
    <ul>
        <li>直接在浏览器输入http://localhost：80(80是http协议默认的端口)</li>
        <li>在浏览器输入本机的ip地址</li>
        <li></li>
        <li></li>
    </ul>
</div>
<div>
    <h4>静态资源文件的请求和处理</h4>
    <ul>
        <li>try catch 防止当前客户端请求文件不存在的时候，服务会终止。用其捕获异常信息，即使文件不存在，服务也不会报错，也不会终止。</li>
        <li>处理静态资源文件请求。(html/css/js) //然后根据请求文件的后缀名获取当前文件的MIME类型(每一种资源文件都有自己的标识类型。html=>(text/html)|css=>(text/css)|text=>(text/plain)); //浏览器会按照代码的MIME类型进行渲染。
        </li>
        <li></li>
        <li></li>
    </ul>
</div>
]]></content:encoded>
    </item>
    
    <item>
      <title>html新特性初了解</title>
      <link href="http://localhost:4444/html/2016/12/15/html5.html"/>
      <pubDate>2016-12-15T18:28:53+08:00</pubDate>
      <author>唐海宸</author>
      <guid>http://localhost:4444/html/2016/12/15/html5</guid>
      <content:encoded><![CDATA[<h2 class="littleTitle">一、h5新增的应用程序标签</h2>
<p>1、datalist不仅可以呈现列表,还可以进行自动匹配查找</p>
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="lineno">1 </span>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">list</span><span class="o">=</span><span class="s">&#39;input_list&#39;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">&gt;</span>
<span class="lineno">2 </span>    <span class="p">&lt;</span><span class="nt">datalist</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;input_list&quot;</span><span class="p">&gt;</span><span class="c">&lt;!-- 此id与上面的list一致，可让其产生关联。 --&gt;</span>
<span class="lineno">3 </span>        <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;angular&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="lineno">4 </span>        <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;javascript&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="lineno">5 </span>        <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;java&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="lineno">6 </span>        <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;c++&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="lineno">7 </span>        <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;nodejs&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="lineno">8 </span>    <span class="p">&lt;/</span><span class="nt">datalist</span><span class="p">&gt;</span></code></pre></figure>
<p>2、progress进度条</p>
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="lineno">1 </span> <span class="p">&lt;</span><span class="nt">progress</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;88&quot;</span> <span class="na">max</span><span class="o">=</span><span class="s">&quot;100&quot;</span><span class="p">&gt;</span></code></pre></figure>
<p>3、meter定义数值。内容全部可设置</p>
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="lineno">1 </span> <span class="p">&lt;</span><span class="nt">meter</span> <span class="na">min</span><span class="o">=</span><span class="s">&quot;0&quot;</span> <span class="na">max</span><span class="o">=</span><span class="s">&quot;100&quot;</span> <span class="na">low</span><span class="o">=</span><span class="s">&quot;40&quot;</span> <span class="na">high</span><span class="o">=</span><span class="s">&quot;90&quot;</span> <span class="na">optimum</span><span class="o">=</span><span class="s">&quot;100&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;91&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">meter</span><span class="p">&gt;</span></code></pre></figure>


<h2 class="littleTitle">二、h5中可以设置自定义属性</h2>
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="lineno">1 </span> <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;content&quot;</span> <span class="na">data-user-list</span><span class="o">=</span><span class="s">&quot;user_list&quot;</span><span class="p">&gt;</span>data-user_list自定义属性 <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></code></pre></figure>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="lineno">1 </span><span class="c1">// 使用getAttribute获取自定义属性</span>
<span class="lineno">2 </span><span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">)</span> <span class="p">;</span>
<span class="lineno">3 </span><span class="kd">var</span> <span class="nx">userName</span> <span class="o">=</span> <span class="nx">user</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;data-user-list&#39;</span><span class="p">)</span> <span class="p">;</span>
<span class="lineno">4 </span><span class="c1">// 使用setAttribute设置自定义属性</span>
<span class="lineno">5 </span><span class="nx">user</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;data-user-list&#39;</span><span class="p">,</span><span class="s1">&#39;user&#39;</span><span class="p">)</span> </code></pre></figure>
<p>attribute可以获得所有自定义的属性，而下面的方法则只获得h5中data的属性</p>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="lineno">1 </span><span class="kd">var</span> <span class="nx">content</span><span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">);</span>
<span class="lineno">2 </span><span class="nx">alert</span><span class="p">(</span><span class="nx">content</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">userList</span><span class="p">)</span><span class="c1">//转化为驼峰命名法</span>
<span class="lineno">3 </span><span class="c1">//jquery</span>
<span class="lineno">4 </span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#content&#39;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;userList&#39;</span><span class="p">);</span><span class="c1">//读</span></code></pre></figure>

<h2 class="littleTitle">三、在h5中，input中增加了许多新的类型。其中比较常用的包括有</h2>
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;date&quot;</span><span class="p">&gt;</span><span class="c">&lt;!-- 获取日历 --&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;datetime&quot;</span><span class="p">&gt;</span><span class="c">&lt;!-- 写入时间 --&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;month&quot;</span><span class="p">&gt;</span><span class="c">&lt;!-- 获取整个月份 --&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;week&quot;</span><span class="p">&gt;</span><span class="c">&lt;!-- 获取整个星期 --&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;time&quot;</span><span class="p">&gt;</span><span class="c">&lt;!-- 选择时间 --&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;color&quot;</span><span class="p">&gt;</span><span class="c">&lt;!-- 选择颜色。可以用value值来获取 --&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;email&quot;</span><span class="p">&gt;</span><span class="c">&lt;!-- 自动校验email格式(不是特别准确) --&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;range&quot;</span> <span class="na">min</span><span class="o">=</span><span class="s">&quot;1&quot;</span> <span class="na">max</span><span class="o">=</span><span class="s">&quot;10&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2&quot;</span> <span class="na">step</span><span class="o">=</span><span class="s">&quot;2&quot;</span><span class="p">&gt;</span><span class="c">&lt;!-- 可操作的进度条</span>
<span class="c">min和max指最小和最大值。value设置初始值，step表示每次移动的数字间隔 --&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;number&quot;</span> <span class="na">min</span><span class="o">=</span><span class="s">&quot;1&quot;</span> <span class="na">max</span><span class="o">=</span><span class="s">&quot;5&quot;</span><span class="p">&gt;</span><span class="c">&lt;!-- 只能输入数字。加上表示范围 --&gt;</span></code></pre></figure>
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span>  <span class="p">&lt;</span><span class="nt">form</span> <span class="na">autocomplete</span><span class="o">=</span><span class="s">&quot;off&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">pattern</span><span class="o">=</span><span class="s">&quot;[0-9]?&quot;</span> <span class="na">required</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">novalidate</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span></code></pre></figure>

	<p>（1）autocomplete默认为on，用于记录之前输入的内容，可在下次内容输入时提示。也可放input对特定生效</p>
	<p>（2）pattern可以加一个正则表达式来验证input输入的值</p>
	<p>（3）required是表单中必须填写的部分，否则不予提交</p>
	<p>（4）novalidate是提交时不验证的内容。应用在form以及以下类型的 input 标签：text, search, url, telephone, email, password, date pickers, range 以及 color。</p>
<h2 class="littleTitle">四、视频音频标签</h2>
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="p">&lt;</span><span class="nt">video</span> <span class="na">width</span><span class="o">=</span><span class="s">&quot;320&quot;</span> <span class="na">height</span><span class="o">=</span><span class="s">&quot;240&quot;</span> <span class="na">loop</span> <span class="na">autoplay</span> <span class="na">controls</span> <span class="na">muted</span> <span class="na">poster</span><span class="o">=</span><span class="s">&quot;xxx.img&quot;</span><span class="p">&gt;</span><span class="c">&lt;!-- 分别为循环播放，自动播放，显示控制条 静音播放 载入时的图像 --&gt;</span>
    <span class="p">&lt;</span><span class="nt">source</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;movie.mp4&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;video/mp4&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">source</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;movie.ogg&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;video/ogg&quot;</span><span class="p">&gt;</span>
    您的浏览器不支持Video标签。
<span class="p">&lt;/</span><span class="nt">video</span><span class="p">&gt;</span></code></pre></figure>
<p>加入source时可以按照浏览器的支持方式依次往下寻找，如果都不支持，会显示文字</p>
<p>audio和video都有很多属性和方法供我们自定义设置</p>
<h3>属性</h3>
<p>(1)currentTime 获取当前播放时间</p>
<p>(2)duration 获取歌曲的总时间</p>
<p>(3)play 是否在播放 返回true/false</p>
<p>(4)pause 是否暂停 返回true/false</p>
<p>(5)volume 设置或返回音频的音量 最大为</p>
<br>
<h3>方法</h3>
<p>(1)play() 播放歌曲</p>
<p>(2)pause() 暂停歌曲</p>
<p>(3)load()重新加载歌曲</p>
<br>
<h3>事件</h3>
<p>(1)play 播放事件</p>
<p>(2)pause 暂停事件</p>
<p>(3)timeupdate 播放位置更改</p>
<p>(4)volumechange 音量更改</p>
<p>(5)loadstart， durationchange， loadeddata， progress， canplay， canplaythrough等</p>
<h2 class="littleTitle">五、js原生选择器querySelector</h2>
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;season&quot;</span> <span class="na">user</span><span class="o">=</span><span class="s">&#39;e&#39;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>1<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>2<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>3<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>4<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;season&quot;</span> <span class="na">user</span><span class="o">=</span><span class="s">&#39;thc&#39;</span><span class="p">&gt;</span>22<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></code></pre></figure>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="lineno"> 1 </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.season&#39;</span><span class="p">);</span><span class="c1">//获取第一个.season元素</span>
<span class="lineno"> 2 </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.season&#39;</span><span class="p">);</span><span class="c1">//获取所有的class为.season的元素</span>
<span class="lineno"> 3 </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.season&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">];</span><span class="c1">//获取第二个class为.season的元素</span>
<span class="lineno"> 4 </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;p.season&#39;</span><span class="p">)</span><span class="c1">//获取第一个class为season的p标签</span>
<span class="lineno"> 5 </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.season&gt;li&#39;</span><span class="p">);</span><span class="c1">//获取第一个li</span>
<span class="lineno"> 6 </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.season&gt;li&#39;</span><span class="p">);</span><span class="c1">//获取所有的li</span>
<span class="lineno"> 7 </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.season&gt;li:nth-child(2)&#39;</span><span class="p">);</span><span class="c1">//获取第2个li</span>
<span class="lineno"> 8 </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.season&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">];</span><span class="c1">//同样是获取第2个li</span>
<span class="lineno"> 9 </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;div,p&#39;</span><span class="p">);</span><span class="c1">//谁的html在前面获取谁。与querySelector中的顺序无关</span>
<span class="lineno">10 </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;div,p&#39;</span><span class="p">)</span><span class="c1">//获取所有的div和p</span>
<span class="lineno">11 </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;[user]&#39;</span><span class="p">)</span><span class="c1">//获取所有拥有user标签的元素(可为自定义，下同)</span>
<span class="lineno">12 </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;p[user]&#39;</span><span class="p">)</span><span class="c1">//获取第一个拥有user标签的元素</span></code></pre></figure>
<h2 class="littleTitle">六、classList</h2>
<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;a b c&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></code></pre></figure>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="lineno">1 </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">classList</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//展示所有的类</span>
<span class="lineno">2 </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">);</span><span class="c1">//增加d类</span>
<span class="lineno">3 </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">);</span><span class="c1">//移除a类</span>
<span class="lineno">4 </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">classList</span><span class="p">.</span><span class="nx">toggle</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">);</span><span class="c1">//判断是否有a类，如果有增加，如果没有删除</span>
<span class="lineno">5 </span><span class="c1">//jq中可以直接这样使用</span>
<span class="lineno">6 </span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;d f&#39;</span><span class="p">);</span>
<span class="lineno">7 </span><span class="c1">//但classList只能单个使用增加</span></code></pre></figure>
<h2 class="littleTitle">六、历史记录</h2>
<p>界面上的所有JS操作不会被浏览器记住， 就无法回到之前的状态,之前我在利用Ajax技术进行翻页操作的时候,浏览器地址栏没有发生变化,就不会记住
历史记录,我们一旦刷新页面,Ajax操作的翻页就会消失.</p>
<p>在HTML5中可以通过window.history操作访问历史状态,但是在H5之前,仅仅能做到前进后退,并不能更多的对历史记录进行操作</p>
<ul>
    <li>1. window.history.forward(); // 前进</li>
    <li>2. window.history.back(); // 后退</li>
    <li>3. window.history.go(); // 刷新</li>
</ul>]]></content:encoded>
    </item>
    
    <item>
      <title>js简单设置cookie</title>
      <link href="http://localhost:4444/javascript/2016/03/04/cookie-simple.html"/>
      <pubDate>2016-03-04T18:28:53+08:00</pubDate>
      <author>唐海宸</author>
      <guid>http://localhost:4444/javascript/2016/03/04/cookie-simple</guid>
      <content:encoded><![CDATA[<p>今天的小项目需要用到登录框框执行缓存，因此记录一下，以便以后使用</p>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="lineno"> 1 </span>        <span class="kd">function</span> <span class="nx">setCookie</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">time</span><span class="p">)</span> <span class="p">{</span><span class="c1">//设置缓存</span>
<span class="lineno"> 2 </span>          <span class="kd">var</span> <span class="nx">strsec</span> <span class="o">=</span> <span class="nx">getsec</span><span class="p">(</span><span class="nx">time</span><span class="p">);</span>
<span class="lineno"> 3 </span>          <span class="kd">var</span> <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
<span class="lineno"> 4 </span>          <span class="nx">date</span><span class="p">.</span><span class="nx">setTime</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">+</span> <span class="nx">strsec</span> <span class="o">*</span> <span class="mi">1</span><span class="p">);</span>
<span class="lineno"> 5 </span>          <span class="nb">document</span><span class="p">.</span><span class="nx">cookie</span> <span class="o">=</span> <span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="nx">escape</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;;expires=&quot;</span> <span class="o">+</span> <span class="nx">date</span><span class="p">.</span><span class="nx">toGMTString</span><span class="p">();</span><span class="c1">//设置键值对以及生成缓存的时间</span>
<span class="lineno"> 6 </span>        <span class="p">}</span>
<span class="lineno"> 7 </span>        <span class="kd">function</span> <span class="nx">getsec</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno"> 8 </span>          <span class="kd">var</span> <span class="nx">str1</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nx">str</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1</span><span class="p">;</span>
<span class="lineno"> 9 </span>          <span class="kd">var</span> <span class="nx">str2</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="lineno">10 </span>          <span class="k">if</span> <span class="p">(</span><span class="nx">str2</span> <span class="o">==</span> <span class="s2">&quot;s&quot;</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">11 </span>            <span class="k">return</span> <span class="nx">str1</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">;</span>
<span class="lineno">12 </span>          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">str2</span> <span class="o">==</span> <span class="s2">&quot;h&quot;</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">13 </span>            <span class="k">return</span> <span class="nx">str1</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">;</span>
<span class="lineno">14 </span>          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">str2</span> <span class="o">==</span> <span class="s2">&quot;d&quot;</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">15 </span>            <span class="k">return</span> <span class="nx">str1</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">;</span>
<span class="lineno">16 </span>          <span class="p">}</span>
<span class="lineno">17 </span>        <span class="p">}</span>
<span class="lineno">18 </span>        <span class="kd">function</span> <span class="nx">delCookie</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">19 </span>          <span class="kd">var</span> <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
<span class="lineno">20 </span>          <span class="nx">date</span><span class="p">.</span><span class="nx">setTime</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
<span class="lineno">21 </span>          <span class="kd">var</span> <span class="nx">cval</span> <span class="o">=</span> <span class="nx">getCookie</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
<span class="lineno">22 </span>          <span class="k">if</span> <span class="p">(</span><span class="nx">cval</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span>
<span class="lineno">23 </span>            <span class="nb">document</span><span class="p">.</span><span class="nx">cookie</span> <span class="o">=</span> <span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="nx">cval</span> <span class="o">+</span> <span class="s2">&quot;;expires=&quot;</span> <span class="o">+</span> <span class="nx">date</span><span class="p">.</span><span class="nx">toGMTString</span><span class="p">();</span>
<span class="lineno">24 </span>        <span class="p">}</span>
<span class="lineno">25 </span>        <span class="nx">setCookie</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span><span class="nx">tanghaichen</span><span class="p">,</span><span class="s1">&#39;s20&#39;</span><span class="p">);</span><span class="c1">//设置一个存活20s的username为tanghaichen的缓存</span></code></pre></figure>
<p>当需要读取缓存时</p>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="lineno">1 </span><span class="kd">function</span> <span class="nx">getCookie</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span>
<span class="lineno">2 </span>    <span class="kd">var</span> <span class="nx">arr</span><span class="p">,</span><span class="nx">reg</span><span class="o">=</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;(^| )&quot;</span><span class="o">+</span><span class="nx">name</span><span class="o">+</span><span class="s2">&quot;=([^;]*)(;|$)&quot;</span><span class="p">);</span>
<span class="lineno">3 </span>    <span class="k">if</span><span class="p">(</span><span class="nx">arr</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">cookie</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">reg</span><span class="p">))</span>
<span class="lineno">4 </span>      <span class="k">return</span> <span class="nx">unescape</span><span class="p">(</span><span class="nx">arr</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
<span class="lineno">5 </span>    <span class="k">else</span>
<span class="lineno">6 </span>      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="lineno">7 </span>  <span class="p">}</span>
<span class="lineno">8 </span>  <span class="kd">var</span> <span class="nx">name</span><span class="o">=</span><span class="nx">getCookie</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span><span class="c1">//获取一个名为username的缓存</span></code></pre></figure>
<a href="http://www.jb51.net/article/64330.htm">参考资料</a>


]]></content:encoded>
    </item>
    
    <item>
      <title>ajax简易库编写</title>
      <link href="http://localhost:4444/ajax/2016/03/04/ajax-simple-exaple.html"/>
      <pubDate>2016-03-04T18:28:53+08:00</pubDate>
      <author>唐海宸</author>
      <guid>http://localhost:4444/ajax/2016/03/04/ajax-simple-exaple</guid>
      <content:encoded><![CDATA[<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="lineno"> 1 </span><span class="c1">//实现ajax请求的公共方法。</span>
<span class="lineno"> 2 </span><span class="c1">//当一个方法传递的参数值过多而且还不固定的时候，我们使用对象同意传值法(吧需要传递的参数都先放在一个对象中，一起传递进去即可)</span>
<span class="lineno"> 3 </span><span class="kd">function</span> <span class="nx">ajax</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno"> 4 </span>    <span class="c1">//把需要使用的参数值设定一个规则和初始值。</span>
<span class="lineno"> 5 </span>   <span class="kd">var</span> <span class="k">default</span> <span class="o">=</span> <span class="p">{</span>
<span class="lineno"> 6 </span>        <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1">//地址</span>
<span class="lineno"> 7 </span>        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="c1">//请求方式</span>
<span class="lineno"> 8 </span>        <span class="nx">dataType</span><span class="o">:</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="c1">//设置请求回来的内容格式json就是对象。txt就是字符串或者json格式的字符串.</span>
<span class="lineno"> 9 </span>        <span class="nx">async</span><span class="o">:</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span> <span class="c1">//请求是同步还是异步</span>
<span class="lineno">10 </span>        <span class="nx">data</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">//放在请求主体中的内容</span>
<span class="lineno">11 </span>        <span class="nx">getHead</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">//当ready state===2时执行的回调方法</span>
<span class="lineno">12 </span>        <span class="nx">success</span><span class="o">:</span> <span class="kc">null</span> <span class="c1">//当ready state===4时执行的回调方法</span>
<span class="lineno">13 </span>    <span class="p">};</span>
<span class="lineno">14 </span>    <span class="c1">//使用用户自己传递进来的值覆盖默认值</span>
<span class="lineno">15 </span>    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">16 </span>        <span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">key</span><span class="p">))</span> <span class="p">{</span>
<span class="lineno">17 </span>            <span class="k">default</span> <span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">options</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span>
<span class="lineno">18 </span>        <span class="p">};</span>
<span class="lineno">19 </span>    <span class="p">};</span>
<span class="lineno">20 </span>      <span class="c1">//用对象传值的好处多了会添加，少了用默认的。不受多传或少传的限制。不受顺序限制。一目了然。</span>
<span class="lineno">21 </span>    <span class="c1">//如果当前的请求方式是get请求，我们需要在url末尾加随机数清除缓存。</span>
<span class="lineno">22 </span>    <span class="k">if</span> <span class="p">(</span>
<span class="lineno">23 </span>        <span class="k">default</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;get&#39;</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">24 </span>        <span class="k">default</span><span class="p">.</span><span class="nx">url</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;?&#39;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">?</span>
<span class="lineno">25 </span>            <span class="k">default</span><span class="p">.</span><span class="nx">url</span> <span class="o">+=</span> <span class="s1">&#39;&amp;&#39;</span> <span class="o">:</span> <span class="k">default</span><span class="p">.</span><span class="nx">url</span> <span class="o">+=</span> <span class="s2">&quot;?&quot;</span><span class="p">;</span>
<span class="lineno">26 </span>        <span class="k">default</span><span class="p">.</span><span class="nx">url</span> <span class="o">+=</span> <span class="s2">&quot;_=&quot;</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">();</span>
<span class="lineno">27 </span>    <span class="p">}</span>
<span class="lineno">28 </span>    <span class="c1">//SEND AJAX</span>
<span class="lineno">29 </span>    <span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="nx">createXHR</span><span class="p">;</span>
<span class="lineno">30 </span>    <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;default.type&#39;</span><span class="p">,</span> <span class="s1">&#39;default.url&#39;</span><span class="p">,</span>
<span class="lineno">31 </span>        <span class="k">default</span><span class="p">.</span><span class="nx">async</span><span class="p">);</span> <span class="c1">//请求方式，url地址，同步/异步</span>
<span class="lineno">32 </span>    <span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<span class="lineno">33 </span>        <span class="k">if</span> <span class="p">(</span><span class="sr">/^2\d{2}$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span><span class="p">))</span> <span class="p">{</span>
<span class="lineno">34 </span>            <span class="c1">//想在等于2的时候操作，需要保证ajax是异步请求。</span>
<span class="lineno">35 </span>            <span class="k">if</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">36 </span>                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span>
<span class="lineno">37 </span>                    <span class="k">default</span><span class="p">.</span><span class="nx">getHead</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">38 </span>                    <span class="k">default</span><span class="p">.</span><span class="nx">getHead</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">xhr</span><span class="p">);</span>
<span class="lineno">39 </span>                <span class="p">}</span>
<span class="lineno">40 </span>            <span class="p">};</span>
<span class="lineno">41 </span>             <span class="k">if</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">42 </span>                <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">;</span> <span class="c1">//获得内容</span>
<span class="lineno">43 </span>                <span class="c1">//如果传递的参数值是json，说明获取的内容是json格式对象</span>
<span class="lineno">44 </span>        <span class="k">if</span> <span class="p">(</span>
<span class="lineno">45 </span>                    <span class="k">default</span><span class="p">.</span><span class="nx">dataType</span> <span class="o">===</span> <span class="s1">&#39;json&#39;</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">46 </span>                    <span class="nx">val</span> <span class="o">=</span> <span class="s1">&#39;JSON&#39;</span> <span class="k">in</span> <span class="nb">window</span> <span class="o">?</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="o">:</span> <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="nx">val</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">);</span> <span class="c1">//判断是否兼容。如果不在window下则不兼容。</span>
<span class="lineno">47 </span>                <span class="p">}</span>
<span class="lineno">48 </span>                 <span class="k">default</span><span class="p">.</span><span class="nx">success</span> <span class="o">&amp;&amp;</span><span class="k">default</span><span class="p">.</span><span class="nx">success</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">val</span><span class="p">);</span>
<span class="lineno">49 </span>                             <span class="p">};</span>
<span class="lineno">50 </span>        <span class="p">};</span>
<span class="lineno">51 </span>    <span class="p">};</span>
<span class="lineno">52 </span>     <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span>
<span class="lineno">53 </span>        <span class="k">default</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="lineno">54 </span><span class="p">}</span>
<span class="lineno">55 </span><span class="o">~</span><span class="kd">function</span><span class="p">(){</span>
<span class="lineno">56 </span>    <span class="kd">function</span><span class="p">(){}</span>
<span class="lineno">57 </span>    <span class="kd">function</span><span class="p">(){}</span>
<span class="lineno">58 </span>    <span class="nb">window</span><span class="p">.</span><span class="nx">ajax</span><span class="o">=</span><span class="nx">ajax</span><span class="p">;</span><span class="c1">//将ajax换成全局的了。</span>
<span class="lineno">59 </span><span class="p">}();</span>
<span class="lineno">60 </span><span class="c1">//自执行函数形成私有作用域。</span>
<span class="lineno">61 </span><span class="nx">ajax</span><span class="p">({</span>
<span class="lineno">62 </span>  <span class="nx">url</span><span class="o">:</span><span class="s1">&#39;data.txt&#39;</span><span class="p">,</span>
<span class="lineno">63 </span>  <span class="nx">type</span><span class="o">:</span><span class="s1">&#39;get&#39;</span><span class="p">,</span>
<span class="lineno">64 </span>  <span class="nx">dataType</span><span class="o">:</span><span class="s1">&#39;json&#39;</span><span class="p">,</span>
<span class="lineno">65 </span>  <span class="nx">async</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span>
<span class="lineno">66 </span>  <span class="nx">getHead</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span>
<span class="lineno">67 </span>    <span class="c1">//this指向xhr当前AJAX对象。</span>
<span class="lineno">68 </span>  <span class="p">},</span>
<span class="lineno">69 </span>  <span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
<span class="lineno">70 </span>     <span class="c1">//this指向xhr当前AJAX对象。</span>
<span class="lineno">71 </span>     <span class="c1">//data:我们从服务器获取的主题内容。</span>
<span class="lineno">72 </span>  <span class="p">}</span>
<span class="lineno">73 </span><span class="p">});</span></code></pre></figure>

<p>在html中可以获取服务器返回的文件。</p>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="lineno"> 1 </span><span class="kd">var</span> <span class="nx">xhr</span><span class="o">=</span><span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
<span class="lineno"> 2 </span>    <span class="kd">var</span> <span class="nx">inp</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
<span class="lineno"> 3 </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;button&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">onclick</span><span class="o">=</span><span class="p">()</span><span class="o">=&gt;</span><span class="p">{</span>
<span class="lineno"> 4 </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span><span class="o">=</span><span class="p">()</span><span class="o">=&gt;</span><span class="p">{</span>
<span class="lineno"> 5 </span>    <span class="k">if</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span><span class="o">==</span><span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno"> 6 </span>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">responseText</span><span class="p">)</span><span class="c1">//点击时候不做刷新可以跟服务器做数据交互</span>
<span class="lineno"> 7 </span>    <span class="p">}</span>
<span class="lineno"> 8 </span><span class="p">}</span>
<span class="lineno"> 9 </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;get&#39;</span><span class="p">,</span><span class="s1">&#39;http://127.0.0.1:8000/ajaxRequest&#39;</span><span class="p">,</span><span class="kc">true</span><span class="p">)</span>
<span class="lineno">10 </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
<span class="lineno">11 </span><span class="p">}</span></code></pre></figure>

]]></content:encoded>
    </item>
    
  </channel>
</rss>
